---
title: JS进阶篇-同步异步任务队列
date: 2019-09-21
tags:
 - JS
categories:
 - JS进阶篇
---

::: tip 前言
在前端中肯定有很多同学在面试、开发当中遇到过很多问题，什么是同步编程、异步编程？什么是队列？<br>
什么是微任务？什么是宏任务？浏览器的线程都有哪些？<br>
对此产生疑问，接下来我们就一起探讨、解析究竟它们是什么都做了什么！
:::

**遇到问题找组织~**<br>
**抱着虚心的、诚恳的、本分老实的态度打开圈圈，打开微信 然后群里巨佬统一给的答复：**

![Image text](http://47.101.157.230/lyxblog/img5.jpg)<br>
我*** 还要你们 ******~&^%^$^$^%$^&%^&*······<br>
![Image text](http://47.101.157.230/lyxblog/img4.png)<br>


### **首先，先了解一下JS的线程：**

众所周知，JS是**单线程！！！**

由此我们提出几个问题：

* **为什么JS是单线程的？**
* **为什么JS的任务要分类为同步任务和异步任务？**
* **为什么异步任务中要设置消息队列（事件监听）？**
* **为什么异步任务的事件中要区分宏任务和微任务？**

[for循环中let，var 的经典面试题：for循环中 console.log(i)详解](https://blog.csdn.net/weixin_43816287/article/details/109244107)<br>
[js同步异步，任务队列](https://blog.csdn.net/aihouti2211/article/details/101167019)<br>
[JS的同步和异步、微任务和宏任务](https://blog.csdn.net/titoni_yunruohan/article/details/110187508?utm_medium=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-1.control&dist_request_id=&depth_1-utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-1.control)<br>

## 一、 为什么JS是单线程的？
js是运行于浏览器的脚本语言，因其经常涉及操作dom，如果是多线程的，如果一个线程修改dom，另一个线程删除dom，那么浏览器就不知道该先执行哪个操作，所以js执行的时候会按照一个任务一个任务来执行，那么任务是怎么排列的呢!

**人话**：浏览器是多线程运行滴，它给js分配一个线程；js就是单线程运行的【一次只干一件事】，所谓单线程，就是只一次只能完成一件任务。如果有多个任务，就必须排队，前面一个任务完成，在执行后面一个任务，以次类推。往复循环。

在讲同步任务、异步任务之前了我们应该先了解下js的运行环境：**浏览器**<br>
`浏览器`是多线程的吗？此时肯定有人会提出疑问，那就我就简单的列举出一些常住的线程如下：

* 渲染引擎线程：顾名思义，该线程负责页面的渲染
* js引擎线程：负责js解析和执行
* 定时触发器线程：处理定时事件，比如setTimeout,setInterval
* 事件触发线程：处理DOM事件
* 异步http请求线程：处理http请求

**注意：渲染线程和js引擎线程是不能同时进行的。渲染线程在执行任务的时候，js引擎线程会被挂起。因为js可以操作DOM,若在渲染中js处理了DOM，浏览器可能就不知所措了。**

虽然JavaScript是单线程的，可是浏览器内部不是单线程的。一些I/O操作、定时器的计时和事件监听（click, keydown...）等都是由浏览器提供的其他线程来完成的。

## 二、 为什么JS的任务要分类为同步任务和异步任务？

试想一下，如果js的任务都是同步的，那么遇到定时器、网络请求等这类型需要延时执行回调函数的任务会发生什么？页面会像瘫痪一下暂停下来等待这些需要需要时间的代码执行完毕，基于此，又引入了异步任务，每个异步任务都必须引入才可。

* 同步任务：同步任务不需要进行等待可立即看到执行结果，比如console。
* 异步任务：异步任务需要等待一定的时候才能看到结果，比如setTimeout、网络请求。

## 三、 为什么异步任务中要设置消息队列（事件监听）？

## 四、 为什么异步任务的事件中要区分宏任务和微任务？


![Image text](http://47.101.157.230/lyxblog/img3.jpg)<br>
